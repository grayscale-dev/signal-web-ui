var __spreadArray=this&&this.__spreadArray||function(e,t,i){if(i||arguments.length===2)for(var r=0,a=t.length,n;r<a;r++){if(n||!(r in t)){if(!n)n=Array.prototype.slice.call(t,0,r);n[r]=t[r]}}return e.concat(n||Array.prototype.slice.call(t))};System.register(["./p-B6pPcgIe.system.js"],(function(e){"use strict";var t,i,r,a;return{setters:[function(e){t=e.r;i=e.c;r=e.h;a=e.a}],execute:function(){var n=function(){return":host{display:block;font-family:var(--signal-font-sans);position:relative}.container{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;gap:var(--signal-space-2)}.control{position:relative}.trigger{-ms-flex-align:center;align-items:center;background:var(--signal-color-surface);border:1px solid var(--signal-color-border);border-radius:var(--signal-radius-md);color:var(--signal-color-text);cursor:pointer;display:-ms-flexbox;display:flex;font:inherit;font-size:13px;-ms-flex-pack:justify;justify-content:space-between;padding:8px 14px;width:100%}.trigger:focus-visible{-webkit-box-shadow:var(--signal-shadow-focus);box-shadow:var(--signal-shadow-focus);outline:none}.value.placeholder{color:var(--signal-color-subtle)}.caret{color:var(--signal-color-subtle);margin-left:var(--signal-space-2)}.input{position:absolute;inset:0;border-radius:var(--signal-radius-md);border:1px solid var(--signal-color-accent);background:var(--signal-color-surface);padding:8px 14px;font:inherit;font-size:13px;color:var(--signal-color-text)}.input:focus{outline:none;-webkit-box-shadow:var(--signal-shadow-focus);box-shadow:var(--signal-shadow-focus)}.clear{position:absolute;right:34px;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);background:transparent;border:none;color:var(--signal-color-subtle);cursor:pointer;font-size:11px;padding:2px 6px}.clear:hover{background:var(--signal-color-muted);border-radius:var(--signal-radius-sm)}.listbox{border:1px solid var(--signal-color-border);border-radius:var(--signal-radius-md);background:var(--signal-color-surface);-webkit-box-shadow:var(--signal-shadow-strong);box-shadow:var(--signal-shadow-strong);max-height:280px;overflow:auto;padding:var(--signal-space-1) 0}.option{-ms-flex-align:center;align-items:center;color:var(--signal-color-text);cursor:pointer;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;padding:8px 12px;font-size:13px}.option.active,.option:hover{background:var(--signal-color-muted)}.option.selected{font-weight:600}.option.disabled{cursor:not-allowed;opacity:0.6}.option.create{font-style:italic}.option-label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.check{color:var(--signal-color-accent);margin-left:var(--signal-space-2)}.empty{padding:10px 12px;font-size:12px;color:var(--signal-color-subtle)}:host([disabled]) .trigger{cursor:not-allowed;opacity:0.6}:host([disabled]) .input{cursor:not-allowed}"};var s=e("signal_combobox",function(){function e(e){var r=this;t(this,e);this.valueChange=i(this,"valueChange");this.openChange=i(this,"openChange");this.queryChange=i(this,"queryChange");this.clear=i(this,"clear");this.options=[];this.mode="single";this.placeholder="Select";this.disabled=false;this.loading=false;this.clearable=false;this.searchable=true;this.creatable=false;this.open=false;this.query="";this.highlightedIndex=0;this.internalValue=null;this.listId="signal-combobox-".concat(Math.random().toString(36).slice(2));this.toggleOpen=function(){if(r.disabled)return;r.open=!r.open;if(!r.open){r.query="";r.highlightedIndex=0}};this.openListbox=function(){if(r.disabled)return;r.open=true};this.closeListbox=function(){var e;r.open=false;r.query="";r.highlightedIndex=0;(e=r.triggerEl)===null||e===void 0?void 0:e.focus()};this.handleSelect=function(e){var t;if(e.disabled)return;if(r.isMulti){var i=Array.isArray(r.selectedValue)?__spreadArray([],r.selectedValue,true):[];var a=i.includes(e.value);var n=a?i.filter((function(t){return t!==e.value})):__spreadArray(__spreadArray([],i,true),[e.value],false);if(r.maxSelected&&n.length>r.maxSelected)return;r.setSelectedValue(n);if((t=r.closeOnSelect)!==null&&t!==void 0?t:!r.isMulti){r.closeListbox()}}else{r.setSelectedValue(e.value);r.closeListbox()}};this.handleClear=function(){var e=r.isMulti?[]:"";r.setSelectedValue(e);r.query="";r.clear.emit()};this.handleInput=function(e){var t=e.target.value;r.query=t;r.highlightedIndex=0;r.queryChange.emit({query:t})};this.handleKeyDown=function(e){var t=r.filteredOptions;if(e.key==="ArrowDown"){e.preventDefault();if(!r.open){r.openListbox()}else{r.highlightedIndex=Math.min(t.length-1,r.highlightedIndex+1)}}if(e.key==="ArrowUp"){e.preventDefault();if(!r.open){r.openListbox()}else{r.highlightedIndex=Math.max(0,r.highlightedIndex-1)}}if(e.key==="Enter"){if(!r.open){r.openListbox();return}e.preventDefault();var i=t[r.highlightedIndex];if(i){r.handleSelect(i)}else if(r.creatable&&r.query){var a=Array.isArray(r.selectedValue)?r.selectedValue:[];r.setSelectedValue(r.isMulti?__spreadArray(__spreadArray([],a,true),[r.query],false):r.query);r.closeListbox()}}if(e.key==="Escape"){if(r.open){e.preventDefault();r.closeListbox()}}};this.handleOptionKeyDown=function(e,t){if(t.disabled)return;if(e.key==="Enter"||e.key===" "){e.preventDefault();r.handleSelect(t)}};this.handleCreateOption=function(){if(!r.creatable||!r.query)return;var e=r.isMulti?__spreadArray(__spreadArray([],Array.isArray(r.selectedValue)?r.selectedValue:[],true),[r.query],false):r.query;r.setSelectedValue(e);r.closeListbox()}}e.prototype.onOpenChange=function(e){var t=this;this.openChange.emit({open:e});if(e){requestAnimationFrame((function(){var e;(e=t.inputEl)===null||e===void 0?void 0:e.focus()}))}};e.prototype.componentWillLoad=function(){if(this.defaultValue!==undefined){this.internalValue=this.defaultValue}else{this.internalValue=this.mode==="multi"?[]:""}};e.prototype.handleOutsideClick=function(e){if(!this.open)return;var t=e.composedPath();if(!t.includes(this.host)){this.closeListbox()}};Object.defineProperty(e.prototype,"isMulti",{get:function(){return this.mode==="multi"},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"selectedValue",{get:function(){return this.value!==undefined?this.value:this.internalValue},enumerable:false,configurable:true});e.prototype.setSelectedValue=function(e){if(this.value===undefined){this.internalValue=e}this.valueChange.emit({value:e})};Object.defineProperty(e.prototype,"filteredOptions",{get:function(){if(!this.query)return this.options;var e=this.query.toLowerCase();return this.options.filter((function(t){return t.label.toLowerCase().includes(e)}))},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"selectedLabels",{get:function(){var e=this;if(this.isMulti){var t=Array.isArray(this.selectedValue)?this.selectedValue:[];return this.options.filter((function(e){return t.includes(e.value)})).map((function(e){return e.label}))}var i=this.options.find((function(t){return t.value===e.selectedValue}));return i?[i.label]:[]},enumerable:false,configurable:true});e.prototype.render=function(){var e=this;var t=this.selectedLabels;var i=t.length?t.join(", "):"";var a=this.filteredOptions;var n=a[this.highlightedIndex];var s=this.clearable&&(this.isMulti?t.length>0:Boolean(i));return r("div",{key:"4ca7002fcbc587647e732fca6cf3b359087bda2f",part:"container",class:{container:true,open:this.open,disabled:this.disabled}},r("div",{key:"1779794539cd275631b289fd7afee9a447a2950d",part:"control",class:"control"},r("button",{key:"86ca0edb9fd65dd0f24e4fe9439be46b78807cb0",part:"trigger",class:"trigger",type:"button",ref:function(t){return e.triggerEl=t},"aria-haspopup":"listbox","aria-expanded":this.open?"true":"false","aria-controls":this.listId,disabled:this.disabled,onClick:this.toggleOpen,onKeyDown:this.handleKeyDown},r("span",{key:"93c74567dd866f8545f2ee339ba53b56a02cd037",part:"value",class:{value:true,placeholder:!i}},i||this.placeholder),r("span",{key:"ebeda586f5c4e0e832a4e2c6e41f21cf9f153f9b",part:"caret",class:"caret","aria-hidden":"true"},"▾")),this.open&&r("input",{key:"eee7ae32175f1e68012799ceb7e0e09979abc01d",part:"input",class:"input",ref:function(t){return e.inputEl=t},placeholder:this.placeholder,value:this.query,readonly:!this.searchable,onInput:this.searchable?this.handleInput:undefined,onKeyDown:this.handleKeyDown,"aria-autocomplete":"list","aria-controls":this.listId,"aria-activedescendant":n?"".concat(this.listId,"-option-").concat(this.highlightedIndex):undefined}),s&&r("button",{key:"02a26e9fc7d5cc371740449f8152bf78de60855c",part:"clear",class:"clear",type:"button",onClick:this.handleClear,"aria-label":"Clear selection"},"Clear")),this.open&&r("div",{key:"24404ddf0cc0fcc0c9673cd4f2ea1f96112aa7ee",part:"listbox",id:this.listId,class:"listbox",role:"listbox","aria-multiselectable":this.isMulti?"true":"false"},this.loading&&r("div",{key:"f66b5f560e477511fe67ff90a5a79e589969b007",part:"empty",class:"empty"},"Loading..."),!this.loading&&a.length===0&&r("div",{key:"a49ea39d1a9d55fd7a6fd8df01494c2abb9a680a",part:"empty",class:"empty"},"No options"),!this.loading&&a.map((function(t,i){var a=e.isMulti?Array.isArray(e.selectedValue)&&e.selectedValue.includes(t.value):e.selectedValue===t.value;var s=t.value===(n===null||n===void 0?void 0:n.value);return r("div",{part:a?"option option-selected":"option",class:{option:true,selected:a,active:s,disabled:Boolean(t.disabled)},role:"option",id:"".concat(e.listId,"-option-").concat(i),"aria-selected":a?"true":"false","aria-disabled":t.disabled?"true":"false",key:t.value,tabIndex:t.disabled?-1:0,onMouseDown:function(e){return e.preventDefault()},onClick:function(){return e.handleSelect(t)},onKeyDown:function(i){return e.handleOptionKeyDown(i,t)}},r("span",{class:"option-label"},t.label),a&&r("span",{class:"check"},"✓"))})),this.creatable&&this.query&&!a.some((function(t){return t.label===e.query}))&&r("div",{key:"5a939e69eddfcc347189aa095a1322bf23c86e64",part:"option option-create",class:"option create",role:"option",tabIndex:0,"aria-selected":"false",onClick:this.handleCreateOption,onKeyDown:function(t){return e.handleOptionKeyDown(t,{value:e.query,label:e.query})}},'Create "'.concat(this.query,'"'))))};Object.defineProperty(e.prototype,"host",{get:function(){return a(this)},enumerable:false,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{open:[{onOpenChange:0}]}},enumerable:false,configurable:true});return e}());s.style=n()}}}));