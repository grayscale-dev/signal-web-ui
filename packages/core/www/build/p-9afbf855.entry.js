import{r as i,c as t,h as s,a as o}from"./p-DS32Solz.js";const e=class{constructor(s){i(this,s),this.openChange=t(this,"openChange"),this.close=t(this,"close"),this.confirm=t(this,"confirm"),this.open=!1,this.size="md",this.closeOnBackdrop=!0,this.closeOnEsc=!0,this.dragEnabled=!1,this.resizable=!1,this.fullscreen=!1,this.showHeaderControls=!0,this.showConfirm=!1,this.confirmText="Confirm",this.position={x:0,y:0},this.sizeState={width:680,height:480},this.lastActiveElement=null,this.previousOverflow="",this.dragging=!1,this.resizing=!1,this.dragStart={x:0,y:0,signalX:0,signalY:0},this.resizeStart={x:0,y:0,width:0,height:0},this.handleTrapFocus=i=>{if("Tab"!==i.key)return;const t=this.getFocusableElements();if(0===t.length)return;const s=t[0],o=t[t.length-1];i.shiftKey&&document.activeElement===s?(i.preventDefault(),o.focus()):i.shiftKey||document.activeElement!==o||(i.preventDefault(),s.focus())},this.handleDragStart=i=>{this.dragEnabled&&!this.fullscreen&&(i.target.closest("button")||(this.dragging=!0,this.dragStart={x:i.clientX,y:i.clientY,signalX:this.position.x,signalY:this.position.y},window.addEventListener("pointermove",this.handleDragMove),window.addEventListener("pointerup",this.handleDragEnd)))},this.handleDragMove=i=>{this.dragging&&(this.position={x:this.dragStart.signalX+(i.clientX-this.dragStart.x),y:this.dragStart.signalY+(i.clientY-this.dragStart.y)})},this.handleDragEnd=()=>{this.dragging=!1,window.removeEventListener("pointermove",this.handleDragMove),window.removeEventListener("pointerup",this.handleDragEnd)},this.handleResizeStart=i=>{this.resizable&&!this.fullscreen&&(i.stopPropagation(),this.resizing=!0,this.resizeStart={x:i.clientX,y:i.clientY,width:this.sizeState.width,height:this.sizeState.height},window.addEventListener("pointermove",this.handleResizeMove),window.addEventListener("pointerup",this.handleResizeEnd))},this.handleResizeMove=i=>{if(!this.resizing)return;const t=this.resizeStart.width+(i.clientX-this.resizeStart.x),s=this.resizeStart.height+(i.clientY-this.resizeStart.y),o=this.minSize?.width??360,e=this.minSize?.height??240,a=this.maxSize?.width??1200,r=this.maxSize?.height??900;this.sizeState={width:Math.max(o,Math.min(a,t)),height:Math.max(e,Math.min(r,s))}},this.handleResizeEnd=()=>{this.resizing=!1,window.removeEventListener("pointermove",this.handleResizeMove),window.removeEventListener("pointerup",this.handleResizeEnd)},this.handleHeaderKeyDown=i=>{this.dragEnabled&&("Enter"!==i.key&&" "!==i.key||i.preventDefault())}}onOpenChange(i){this.openChange.emit({open:i}),i?(this.lastActiveElement=document.activeElement,this.previousOverflow=document.body.style.overflow,document.body.style.overflow="hidden",this.resetPosition(),requestAnimationFrame((()=>this.focusFirstElement()))):(document.body.style.overflow=this.previousOverflow,this.lastActiveElement?.focus())}componentWillLoad(){this.defaultSize&&(this.sizeState={...this.defaultSize}),this.defaultPosition&&(this.position={...this.defaultPosition})}componentDidLoad(){this.open&&this.onOpenChange(!0)}handleGlobalKeydown(i){this.open&&("Escape"===i.key&&this.closeOnEsc&&(i.preventDefault(),this.requestClose()),"Tab"===i.key&&this.handleTrapFocus(i))}focusFirstElement(){const i=this.getFocusableElements();i.length>0?i[0].focus():this.dialogEl?.focus()}getFocusableElements(){return this.dialogEl?Array.from(this.dialogEl.querySelectorAll("button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])")).filter((i=>!i.hasAttribute("disabled"))):[]}requestClose(){this.close.emit(),this.open=!1}resetPosition(){this.position=this.defaultPosition?{...this.defaultPosition}:{x:0,y:0}}render(){if(!this.open)return null;const i=this.fullscreen?{}:{transform:`translate(${this.position.x}px, ${this.position.y}px)`};this.fullscreen||!this.resizable&&!this.defaultSize||(i.width=`${this.sizeState.width}px`,i.height=`${this.sizeState.height}px`);const t=this.dragEnabled?"button":void 0,o=this.dragEnabled?0:void 0,e=this.dragEnabled?this.handleDragStart:void 0,a=this.dragEnabled?this.handleHeaderKeyDown:void 0;return s("div",{part:"overlay",class:"overlay"},s("div",{part:"backdrop",class:"backdrop",onClick:this.closeOnBackdrop?()=>this.requestClose():void 0,"aria-hidden":"true"}),s("div",{part:"dialog",class:{dialog:!0,fullscreen:this.fullscreen},role:"dialog","aria-modal":"true","aria-label":this.heading,style:i,ref:i=>this.dialogEl=i,tabindex:-1},s("div",{part:"header",class:"header",role:t,tabIndex:o,onPointerDown:e,onKeyDown:a},s("slot",{name:"header"},s("div",{class:"header-content"},s("div",null,this.heading&&s("h2",{class:"title"},this.heading),this.description&&s("p",{class:"description"},this.description)),this.showHeaderControls&&s("div",{class:"header-actions"},this.showConfirm&&s("button",{class:"header-button",type:"button",onClick:()=>this.confirm.emit()},this.confirmText),s("button",{class:"close-button",type:"button","aria-label":"Close dialog",onClick:()=>this.requestClose()},"Ã—"))))),s("div",{part:"body",class:"body"},s("slot",null)),s("div",{part:"footer",class:"footer"},s("slot",{name:"footer"})),this.resizable&&!this.fullscreen&&s("div",{part:"resize-handle",class:"resize-handle",onPointerDown:this.handleResizeStart})))}get host(){return o(this)}static get watchers(){return{open:[{onOpenChange:0}]}}};e.style=':host{font-family:var(--signal-font-sans)}.overlay{position:fixed;inset:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;padding:var(--signal-space-4);z-index:1000}.backdrop{position:absolute;inset:0;background:var(--signal-color-overlay);-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px)}.dialog{position:relative;z-index:1;background:var(--signal-color-surface);border:1px solid var(--signal-color-border);border-radius:var(--signal-radius-md);-webkit-box-shadow:var(--signal-shadow-strong);box-shadow:var(--signal-shadow-strong);display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;max-width:calc(100vw - 4rem);max-height:calc(100vh - 4rem);min-width:320px;overflow:hidden}:host([size="sm"]) .dialog{width:min(100%, 520px)}:host([size="md"]) .dialog{width:min(100%, 720px)}:host([size="lg"]) .dialog{width:min(100%, 960px)}.dialog.fullscreen{width:calc(100vw - 2rem);height:calc(100vh - 2rem);max-width:none;max-height:none;border-radius:var(--signal-radius-sm)}.header{border-bottom:1px solid var(--signal-color-border);padding:var(--signal-space-4) var(--signal-space-5);background:var(--signal-color-surface)}.header-content{display:-ms-flexbox;display:flex;-ms-flex-align:start;align-items:flex-start;-ms-flex-pack:justify;justify-content:space-between;gap:var(--signal-space-4)}.title{font-size:15px;margin:0;color:var(--signal-color-text)}.description{font-size:13px;margin:4px 0 0;color:var(--signal-color-subtle)}.header-actions{display:-ms-inline-flexbox;display:inline-flex;gap:var(--signal-space-2);-ms-flex-align:center;align-items:center}.header-button{border:1px solid var(--signal-color-border);background:var(--signal-color-surface);color:var(--signal-color-subtle);border-radius:var(--signal-radius-sm);padding:4px 8px;font-size:12px;cursor:pointer}.close-button{width:32px;height:32px;border-radius:var(--signal-radius-sm);border:none;background:transparent;color:var(--signal-color-subtle);font-size:20px;cursor:pointer}.close-button:hover,.header-button:hover{background:var(--signal-color-muted)}.close-button:focus-visible,.header-button:focus-visible{outline:none;-webkit-box-shadow:var(--signal-shadow-focus);box-shadow:var(--signal-shadow-focus)}.body{padding:var(--signal-space-5);color:var(--signal-color-text);overflow:auto;-ms-flex:1;flex:1}.footer{border-top:1px solid var(--signal-color-border);padding:var(--signal-space-4) var(--signal-space-5);background:var(--signal-color-surface)}.resize-handle{position:absolute;right:6px;bottom:6px;width:14px;height:14px;cursor:se-resize;background:transparent}:host([drag-enabled]) .header{cursor:move}';export{e as signal_modal}