import{r as s,c as t,h as e,a as i}from"./p-DS32Solz.js";const r=class{constructor(e){s(this,e),this.openChange=t(this,"openChange"),this.select=t(this,"itemSelect"),this.open=!1,this.items=[],this.label="Menu",this.align="left",this.closeOnSelect=!0,this.focusedIndex=-1,this.onOutsideClick=s=>{this.open&&(this.host.contains(s.target)||this.close())},this.toggle=()=>{this.open=!this.open}}handleOpen(s){this.openChange.emit({open:s}),s?this.setInitialFocus():this.focusedIndex=-1}componentDidLoad(){this.open&&this.setInitialFocus()}setInitialFocus(){const s=this.items.findIndex((s=>!s.disabled));this.focusedIndex=s}onKeydown(s){if(this.open&&("Escape"===s.key&&(this.close(),s.stopPropagation()),"ArrowDown"===s.key&&(s.preventDefault(),this.focusedIndex=Math.min(this.items.length-1,this.focusedIndex+1)),"ArrowUp"===s.key&&(s.preventDefault(),this.focusedIndex=Math.max(0,this.focusedIndex-1)),"Enter"===s.key&&this.focusedIndex>=0)){const s=this.items[this.focusedIndex];s&&!s.disabled&&this.emitSelect(s.key)}}componentDidRender(){if(!this.open)return;const s=this.host.shadowRoot?.querySelector(".menu");s&&s.focus()}connectedCallback(){document.addEventListener("mousedown",this.onOutsideClick)}disconnectedCallback(){document.removeEventListener("mousedown",this.onOutsideClick)}close(){this.open=!1}emitSelect(s){this.select.emit({key:s}),this.closeOnSelect&&this.close()}renderTrigger(){return e("button",{type:"button",class:"trigger","aria-haspopup":"menu","aria-expanded":this.open.toString(),onClick:this.toggle},e("slot",{name:"trigger"},this.label),e("span",{class:"caret","aria-hidden":!0},"â–¾"))}renderItems(){return e("div",{class:"menu",role:"menu",tabIndex:-1,"aria-label":this.label},this.items.map(((s,t)=>e("button",{key:s.key,type:"button",role:"menuitem",class:{item:!0,focused:this.focusedIndex===t,disabled:!!s.disabled,danger:!!s.danger},disabled:s.disabled,onClick:()=>!s.disabled&&this.emitSelect(s.key)},e("span",{class:"label"},s.label),s.shortcut&&e("span",{class:"shortcut"},s.shortcut)))))}render(){return e("div",{key:"48ae894aabf6f92343f38081c36ed76110c07ee3",class:{wrapper:!0,open:this.open,[this.align]:!0}},this.renderTrigger(),this.open&&this.renderItems())}get host(){return i(this)}static get watchers(){return{open:[{handleOpen:0}]}}};r.style=":host{display:inline-block;position:relative}.wrapper{position:relative}.trigger{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;gap:6px;padding:8px 12px;border-radius:var(--signal-radius-sm, 6px);border:1px solid var(--signal-color-border, #d0d7de);background:var(--signal-color-surface, #fff);color:var(--signal-color-text, #111);font:inherit;cursor:pointer;-webkit-box-shadow:var(--signal-shadow-soft, 0 1px 2px rgba(0,0,0,0.08));box-shadow:var(--signal-shadow-soft, 0 1px 2px rgba(0,0,0,0.08))}.trigger:focus-visible{outline:2px solid var(--signal-color-accent, #236cff);outline-offset:2px}.caret{color:var(--signal-color-subtle, #5f6a7d)}.menu{position:absolute;min-width:220px;margin-top:8px;border-radius:var(--signal-radius-sm, 6px);border:1px solid var(--signal-color-border, #d0d7de);background:var(--signal-color-surface, #fff);-webkit-box-shadow:var(--signal-shadow-strong, 0 12px 28px rgba(0,0,0,0.2));box-shadow:var(--signal-shadow-strong, 0 12px 28px rgba(0,0,0,0.2));padding:4px;z-index:10;outline:none}.wrapper.right .menu{right:0}.wrapper.left .menu{left:0}.item{width:100%;text-align:left;border:0;background:transparent;border-radius:4px;padding:8px 10px;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;color:var(--signal-color-text, #111);cursor:pointer}.item:hover,.item.focused{background:var(--signal-color-muted, #f2f4f7)}.item.disabled{opacity:0.55;cursor:not-allowed}.item.danger{color:var(--signal-color-danger, #d1242f)}.shortcut{color:var(--signal-color-subtle, #5f6a7d);font-size:12px}";export{r as signal_dropdown}