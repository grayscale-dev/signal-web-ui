var __assign=this&&this.__assign||function(){__assign=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign.apply(this,arguments)};var __spreadArray=this&&this.__spreadArray||function(e,t,a){if(a||arguments.length===2)for(var r=0,i=t.length,n;r<i;r++){if(n||!(r in t)){if(!n)n=Array.prototype.slice.call(t,0,r);n[r]=t[r]}}return e.concat(n||Array.prototype.slice.call(t))};import{r as registerInstance,c as createEvent,h}from"./index-CntKH4Tg.js";var uiFeatureTableCss=function(){return':host{--signal-table-border:var(--signal-border, #e5e7eb);--signal-table-surface:var(--signal-surface, #ffffff);--signal-table-muted:var(--signal-muted, #f3f4f6);--signal-table-text:var(--signal-text, #111827);--signal-table-subtle:var(--signal-subtle, #6b7280);--signal-table-radius:12px;--signal-table-shadow:0 8px 20px rgba(17, 24, 39, 0.06);--signal-accent:var(--signal-accent, #2563eb)}.root{border:1px solid var(--signal-table-border);border-radius:var(--signal-table-radius);background:var(--signal-table-surface);-webkit-box-shadow:var(--signal-table-shadow);box-shadow:var(--signal-table-shadow);overflow:hidden}.caption{padding:12px 16px;font-size:0.95rem;font-weight:600;color:var(--signal-table-text)}.toolbar{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:center;align-items:center;gap:12px;padding:12px 16px;border-bottom:1px solid var(--signal-table-border);background:var(--signal-table-muted)}.search{-ms-flex:1 1 220px;flex:1 1 220px;min-width:180px;padding:8px 10px;border:1px solid var(--signal-table-border);border-radius:8px;background:#fff}.filters{display:-ms-flexbox;display:flex;gap:12px;-ms-flex-wrap:wrap;flex-wrap:wrap}.filter{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;gap:6px}.filter-label{font-size:0.85rem;color:var(--signal-table-subtle)}.filter-select{padding:6px 8px;border:1px solid var(--signal-table-border);border-radius:8px;background:#fff}.table-wrapper{overflow:auto}.table{width:100%;border-collapse:collapse;text-align:left;color:var(--signal-table-text);font-size:0.9375rem}.head th{background:var(--signal-table-muted);color:var(--signal-table-subtle);font-weight:600;letter-spacing:0.04em;text-transform:uppercase;padding:12px 16px;border-bottom:1px solid var(--signal-table-border);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.header-content{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;gap:6px}.sortable{cursor:pointer}.sort-indicator{font-size:0.75rem;color:var(--signal-table-subtle)}.body .row{border-top:1px solid var(--signal-table-border);-webkit-transition:background-color 120ms ease;transition:background-color 120ms ease}.body .row:hover{background:var(--signal-table-muted);cursor:pointer}.cell{padding:12px 16px;vertical-align:middle;color:var(--signal-table-text)}.align-center{text-align:center}.align-right{text-align:right}.selection-col{width:44px;text-align:center}.actions-col{width:60px;text-align:right}.checkbox{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;gap:6px;font-size:0.9rem;color:var(--signal-table-text)}.empty{text-align:center;color:var(--signal-table-subtle);padding:18px 16px}.pagination{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;padding:12px 16px;border-top:1px solid var(--signal-table-border);background:var(--signal-table-muted)}.pagination-meta{color:var(--signal-table-subtle);font-size:0.9rem}.pagination-actions{display:-ms-flexbox;display:flex;gap:8px}.button{padding:8px 12px;border:1px solid var(--signal-table-border);border-radius:8px;background:#fff;cursor:pointer}.button:disabled{opacity:0.5;cursor:not-allowed}.row.selected{background:rgba(37, 99, 235, 0.06)}[data-loading="true"]{opacity:0.7;pointer-events:none}'};var SignalFeatureTable=function(){function e(e){var t=this;registerInstance(this,e);this.rowClick=createEvent(this,"rowClick");this.selectionChanged=createEvent(this,"selectionChanged");this.sortChange=createEvent(this,"sortChange");this.filterChange=createEvent(this,"filterChange");this.searchChange=createEvent(this,"searchChange");this.pageChange=createEvent(this,"pageChange");this.columns=[];this.rows=[];this.searchable=false;this.filterable=false;this.selectable=false;this.selectedKeys=[];this.emptyText="No results";this.filters=[];this.loading=false;this.searchQuery="";this.internalFilters={};this.internalSelection={};this.handleSearch=function(e){var a=e.target.value;t.searchQuery=a;t.searchChange.emit({query:a})};this.handleFilterChange=function(e,a){var r;t.internalFilters=__assign(__assign({},t.internalFilters),(r={},r[e]=a,r));t.filterChange.emit({filters:t.internalFilters})}}e.prototype.componentWillLoad=function(){this.internalFilters=this.filters.reduce((function(e,t){if(t.value)e[t.key]=t.value;return e}),{});this.internalSelection=this.selectedKeys.reduce((function(e,t){e[t]=true;return e}),{})};e.prototype.getRowId=function(e,t){if(typeof this.rowKey==="function")return this.rowKey(e);if(typeof this.rowKey==="string"&&e[this.rowKey]!=null)return String(e[this.rowKey]);return String(t)};e.prototype.handleSort=function(e){if(!e.sortable)return;var t=this.internalSort&&this.internalSort.key===e.key?this.internalSort.direction==="asc"?{key:e.key,direction:"desc"}:undefined:{key:e.key,direction:"asc"};this.internalSort=t;this.sortChange.emit({sort:t})};e.prototype.toggleRowSelection=function(e){var t=__assign({},this.internalSelection);t[e]=!t[e];this.internalSelection=t;var a=Object.keys(t).filter((function(e){return t[e]}));this.selectionChanged.emit({keys:a})};e.prototype.toggleAllSelection=function(e){var t=this;var a=e.every((function(e,a){return t.internalSelection[t.getRowId(e,a)]}));var r={};if(!a){e.forEach((function(e,a){r[t.getRowId(e,a)]=true}))}this.internalSelection=r;var i=Object.keys(r).filter((function(e){return r[e]}));this.selectionChanged.emit({keys:i})};e.prototype.changePage=function(e){if(!this.pagination)return;var t=Math.max(0,this.pagination.pageIndex+e);this.pageChange.emit({pageIndex:t,pageSize:this.pagination.pageSize})};Object.defineProperty(e.prototype,"filteredRows",{get:function(){var e=this;var t=__spreadArray([],this.rows,true);if(this.searchable&&this.searchQuery){var a=this.searchQuery.toLowerCase();t=t.filter((function(t){return e.columns.some((function(e){var r;return String((r=t[e.key])!==null&&r!==void 0?r:"").toLowerCase().includes(a)}))}))}if(this.filterable){t=t.filter((function(t){return Object.entries(e.internalFilters).every((function(e){var a;var r=e[0],i=e[1];if(!i)return true;return String((a=t[r])!==null&&a!==void 0?a:"")===i}))}))}if(this.internalSort){var r=this.internalSort,i=r.key,n=r.direction;t=__spreadArray([],t,true).sort((function(e,t){var a=e[i];var r=t[i];if(a==null&&r==null)return 0;if(a==null)return 1;if(r==null)return-1;if(a===r)return 0;return n==="asc"?a>r?1:-1:a<r?1:-1}))}return t},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"pagedRows",{get:function(){if(!this.pagination)return this.filteredRows;var e=this.pagination.pageIndex*this.pagination.pageSize;var t=e+this.pagination.pageSize;return this.filteredRows.slice(e,t)},enumerable:false,configurable:true});e.prototype.renderToolbar=function(e){var t=this;if(!this.searchable&&!this.filterable&&!this.selectable)return null;return h("div",{part:"toolbar",class:"toolbar"},this.selectable&&h("label",{class:"checkbox"},h("input",{type:"checkbox",checked:e.length>0&&e.every((function(e,a){return t.internalSelection[t.getRowId(e,a)]})),onChange:function(){return t.toggleAllSelection(e)}}),h("span",null,"Select all")),this.searchable&&h("input",{part:"search",class:"search",type:"search",placeholder:"Search…",value:this.searchQuery,onInput:this.handleSearch}),this.filterable&&h("div",{class:"filters"},this.filters.map((function(e){return h("label",{class:"filter",key:e.key},h("span",{class:"filter-label"},e.label),h("select",{class:"filter-select",onInput:function(a){return t.handleFilterChange(e.key,a.target.value)}},h("option",{value:""},"Any"),e.options.map((function(a){var r;return h("option",{key:a.value,value:a.value,selected:((r=t.internalFilters[e.key])!==null&&r!==void 0?r:"")===a.value},a.label)}))))}))))};e.prototype.renderPagination=function(e){var t=this;if(!this.pagination)return null;var a=this.pagination,r=a.pageIndex,i=a.pageSize;var n=r*i+1;var s=Math.min(e,n+i-1);var l=e;return h("div",{part:"pagination",class:"pagination"},h("div",{class:"pagination-meta"},n,"-",s," of ",l),h("div",{class:"pagination-actions"},h("button",{part:"page-prev",class:"button",onClick:function(){return t.changePage(-1)},disabled:r===0},"Prev"),h("button",{part:"page-next",class:"button",onClick:function(){return t.changePage(1)},disabled:s>=l},"Next")))};e.prototype.render=function(){var e=this;var t=this.pagedRows;var a=this.filteredRows.length;return h("div",{key:"3adf0b1fc58bb7d45c69b4d4a27e6d6718d1c063",part:"root",class:"root","data-loading":this.loading?"true":"false"},this.caption&&h("div",{key:"9dc0e1debeeabec51ed52563a0e273f2a245cdd2",part:"caption",class:"caption"},this.caption),this.renderToolbar(t),h("div",{key:"9505f7815106acd8969d6d9c8f867cb48afcbb38",class:"table-wrapper"},h("table",{key:"7ea7808c5174acecc5ba0b6a8759812312bd18ad",part:"table",class:"table"},h("thead",{key:"0733c89dd560bbba9ecda1e6c934cd8f2b9cff24",part:"head",class:"head"},h("tr",{key:"72e23bda6be61c80fa36e735ecd0d791c2fb64f8"},this.selectable&&h("th",{key:"dd21288844ba02a39f66ab13b8ba240dcc2d2c97",class:"selection-col"}),this.columns.map((function(t){var a;var r,i,n;var s=((r=e.internalSort)===null||r===void 0?void 0:r.key)===t.key;var l=(i=e.internalSort)===null||i===void 0?void 0:i.direction;return h("th",{part:"header",key:t.key,style:t.width?{width:t.width}:undefined,class:(a={header:true,sortable:!!t.sortable},a["align-".concat((n=t.align)!==null&&n!==void 0?n:"left")]=true,a.sorted=s,a),onClick:function(){return e.handleSort(t)}},h("div",{class:"header-content"},h("slot",{name:"header-".concat(t.key)},t.header),t.sortable&&h("span",{class:"sort-indicator","aria-hidden":"true"},s?l==="asc"?"▲":"▼":"↕")))})),h("th",{key:"568de300ec0ab5ca836f9d6b57d063935e379bc7",class:"actions-col"},h("slot",{key:"1bc0e5f0a1ace0f72618bd5c668debb337cd4a46",name:"actions-header"})))),h("tbody",{key:"1e4b64a28bae0453e628b5d3ac595b55377ad28e",part:"body",class:"body"},this.loading?h("tr",null,h("td",{class:"empty",colSpan:this.columns.length+(this.selectable?1:0)+1},h("slot",{name:"loading"},"Loading…"))):t.length===0?h("tr",null,h("td",{class:"empty",colSpan:this.columns.length+(this.selectable?1:0)+1},h("slot",{name:"empty"},this.emptyText))):t.map((function(t,a){var r=e.getRowId(t,a);var i=e.internalSelection[r];return h("tr",{part:"row",key:r,class:{row:true,selected:i},onClick:function(){return e.rowClick.emit({row:t})}},e.selectable&&h("td",{class:"selection-col cell"},h("label",{class:"checkbox"},h("input",{type:"checkbox",checked:!!i,onClick:function(e){return e.stopPropagation()},onChange:function(){return e.toggleRowSelection(r)},"aria-label":"Select row"}))),e.columns.map((function(e){var a;var r,i;return h("td",{part:"cell",key:e.key,class:(a={cell:true},a["align-".concat((r=e.align)!==null&&r!==void 0?r:"left")]=true,a)},h("slot",{name:"cell-".concat(e.key)},e.render?e.render(t):(i=t[e.key])!==null&&i!==void 0?i:"—"))})),h("td",{class:"actions-col cell"},h("slot",{name:"row-actions","row-id":r})))}))))),this.renderPagination(a))};return e}();SignalFeatureTable.style=uiFeatureTableCss();export{SignalFeatureTable as signal_feature_table};