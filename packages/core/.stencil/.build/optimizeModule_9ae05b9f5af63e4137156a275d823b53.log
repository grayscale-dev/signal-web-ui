import{r as e,c as t,h as a}from"./p-CntKH4Tg.js";const s=class{constructor(a){e(this,a),this.rowClick=t(this,"rowClick"),this.selectionChanged=t(this,"selectionChanged"),this.sortChange=t(this,"sortChange"),this.filterChange=t(this,"filterChange"),this.searchChange=t(this,"searchChange"),this.pageChange=t(this,"pageChange"),this.columns=[],this.rows=[],this.searchable=!1,this.filterable=!1,this.selectable=!1,this.selectedKeys=[],this.emptyText="No results",this.filters=[],this.loading=!1,this.searchQuery="",this.internalFilters={},this.internalSelection={},this.handleSearch=e=>{const t=e.target.value;this.searchQuery=t,this.searchChange.emit({query:t})},this.handleFilterChange=(e,t)=>{this.internalFilters={...this.internalFilters,[e]:t},this.filterChange.emit({filters:this.internalFilters})}}componentWillLoad(){this.internalFilters=this.filters.reduce(((e,t)=>(t.value&&(e[t.key]=t.value),e)),{}),this.internalSelection=this.selectedKeys.reduce(((e,t)=>(e[t]=!0,e)),{})}getRowId(e,t){return"function"==typeof this.rowKey?this.rowKey(e):String("string"==typeof this.rowKey&&null!=e[this.rowKey]?e[this.rowKey]:t)}handleSort(e){if(!e.sortable)return;const t=this.internalSort&&this.internalSort.key===e.key?"asc"===this.internalSort.direction?{key:e.key,direction:"desc"}:void 0:{key:e.key,direction:"asc"};this.internalSort=t,this.sortChange.emit({sort:t})}toggleRowSelection(e){const t={...this.internalSelection};t[e]=!t[e],this.internalSelection=t;const a=Object.keys(t).filter((e=>t[e]));this.selectionChanged.emit({keys:a})}toggleAllSelection(e){const t=e.every(((e,t)=>this.internalSelection[this.getRowId(e,t)])),a={};t||e.forEach(((e,t)=>{a[this.getRowId(e,t)]=!0})),this.internalSelection=a;const s=Object.keys(a).filter((e=>a[e]));this.selectionChanged.emit({keys:s})}changePage(e){if(!this.pagination)return;const t=Math.max(0,this.pagination.pageIndex+e);this.pageChange.emit({pageIndex:t,pageSize:this.pagination.pageSize})}get filteredRows(){let e=[...this.rows];if(this.searchable&&this.searchQuery){const t=this.searchQuery.toLowerCase();e=e.filter((e=>this.columns.some((a=>String(e[a.key]??"").toLowerCase().includes(t)))))}if(this.filterable&&(e=e.filter((e=>Object.entries(this.internalFilters).every((([t,a])=>!a||String(e[t]??"")===a))))),this.internalSort){const{key:t,direction:a}=this.internalSort;e=[...e].sort(((e,s)=>{const i=e[t],l=s[t];return null==i&&null==l?0:null==i?1:null==l?-1:i===l?0:"asc"===a?i>l?1:-1:i<l?1:-1}))}return e}get pagedRows(){if(!this.pagination)return this.filteredRows;const e=this.pagination.pageIndex*this.pagination.pageSize;return this.filteredRows.slice(e,e+this.pagination.pageSize)}renderToolbar(e){return this.searchable||this.filterable||this.selectable?a("div",{part:"toolbar",class:"toolbar"},this.selectable&&a("label",{class:"checkbox"},a("input",{type:"checkbox",checked:e.length>0&&e.every(((e,t)=>this.internalSelection[this.getRowId(e,t)])),onChange:()=>this.toggleAllSelection(e)}),a("span",null,"Select all")),this.searchable&&a("input",{part:"search",class:"search",type:"search",placeholder:"Search…",value:this.searchQuery,onInput:this.handleSearch}),this.filterable&&a("div",{class:"filters"},this.filters.map((e=>a("label",{class:"filter",key:e.key},a("span",{class:"filter-label"},e.label),a("select",{class:"filter-select",onInput:t=>this.handleFilterChange(e.key,t.target.value)},a("option",{value:""},"Any"),e.options.map((t=>a("option",{key:t.value,value:t.value,selected:(this.internalFilters[e.key]??"")===t.value},t.label))))))))):null}renderPagination(e){if(!this.pagination)return null;const{pageIndex:t,pageSize:s}=this.pagination,i=t*s+1,l=Math.min(e,i+s-1),r=e;return a("div",{part:"pagination",class:"pagination"},a("div",{class:"pagination-meta"},i,"-",l," of ",r),a("div",{class:"pagination-actions"},a("button",{part:"page-prev",class:"button",onClick:()=>this.changePage(-1),disabled:0===t},"Prev"),a("button",{part:"page-next",class:"button",onClick:()=>this.changePage(1),disabled:l>=r},"Next")))}render(){const e=this.pagedRows,t=this.filteredRows.length;return a("div",{key:"abf78e1f434c8c8aa17647d8b0685089234fe809",part:"root",class:"root","data-loading":this.loading?"true":"false"},this.caption&&a("div",{key:"5ab01c9325b7ae618ecfe1d3911f971be06f706f",part:"caption",class:"caption"},this.caption),this.renderToolbar(e),a("div",{key:"be417d251aa52ee896928c362922ca2e4e50bf63",class:"table-wrapper"},a("table",{key:"7f97714d408e8c15a44c2447fb637f76a8c4c106",part:"table",class:"table"},a("thead",{key:"16536d74d4eaa06f9164bae6ae4865c5669b2f02",part:"head",class:"head"},a("tr",{key:"9e184c34939ffb37b8d3620dbc0f768acbe27e03"},this.selectable&&a("th",{key:"e0921c339ffbdc7423a6b40877c0bba40eb3995b",class:"selection-col"}),this.columns.map((e=>{const t=this.internalSort?.key===e.key,s=this.internalSort?.direction;return a("th",{part:"header",key:e.key,style:e.width?{width:e.width}:void 0,class:{header:!0,sortable:!!e.sortable,[`align-${e.align??"left"}`]:!0,sorted:t},onClick:()=>this.handleSort(e)},a("div",{class:"header-content"},a("slot",{name:`header-${e.key}`},e.header),e.sortable&&a("span",{class:"sort-indicator","aria-hidden":"true"},t?"asc"===s?"▲":"▼":"↕")))})),a("th",{key:"e44c78e0349197067df90fd3c2431e26f0908746",class:"actions-col"},a("slot",{key:"4afd7e5d958bb99305aef23fe6b4ce008d51fddd",name:"actions-header"})))),a("tbody",{key:"e73c3d70cae6103e4ab82ee273e3e59c6c78c328",part:"body",class:"body"},this.loading?a("tr",null,a("td",{class:"empty",colSpan:this.columns.length+(this.selectable?1:0)+1},a("slot",{name:"loading"},"Loading…"))):0===e.length?a("tr",null,a("td",{class:"empty",colSpan:this.columns.length+(this.selectable?1:0)+1},a("slot",{name:"empty"},this.emptyText))):e.map(((e,t)=>{const s=this.getRowId(e,t),i=this.internalSelection[s];return a("tr",{part:"row",key:s,class:{row:!0,selected:i},onClick:()=>this.rowClick.emit({row:e})},this.selectable&&a("td",{class:"selection-col cell"},a("label",{class:"checkbox"},a("input",{type:"checkbox",checked:!!i,onClick:e=>e.stopPropagation(),onChange:()=>this.toggleRowSelection(s),"aria-label":"Select row"}))),this.columns.map((t=>a("td",{part:"cell",key:t.key,class:{cell:!0,[`align-${t.align??"left"}`]:!0}},a("slot",{name:`cell-${t.key}`},t.render?t.render(e):e[t.key]??"—")))),a("td",{class:"actions-col cell"},a("slot",{name:"row-actions","row-id":s})))}))))),this.renderPagination(t))}};s.style=':host{--signal-table-border:var(--signal-border, #e5e7eb);--signal-table-surface:var(--signal-surface, #ffffff);--signal-table-muted:var(--signal-muted, #f3f4f6);--signal-table-text:var(--signal-text, #111827);--signal-table-subtle:var(--signal-subtle, #6b7280);--signal-table-radius:12px;--signal-table-shadow:0 8px 20px rgba(17, 24, 39, 0.06);--signal-accent:var(--signal-accent, #2563eb)}.root{border:1px solid var(--signal-table-border);border-radius:var(--signal-table-radius);background:var(--signal-table-surface);-webkit-box-shadow:var(--signal-table-shadow);box-shadow:var(--signal-table-shadow);overflow:hidden}.caption{padding:12px 16px;font-size:0.95rem;font-weight:600;color:var(--signal-table-text)}.toolbar{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:center;align-items:center;gap:12px;padding:12px 16px;border-bottom:1px solid var(--signal-table-border);background:var(--signal-table-muted)}.search{-ms-flex:1 1 220px;flex:1 1 220px;min-width:180px;padding:8px 10px;border:1px solid var(--signal-table-border);border-radius:8px;background:#fff}.filters{display:-ms-flexbox;display:flex;gap:12px;-ms-flex-wrap:wrap;flex-wrap:wrap}.filter{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;gap:6px}.filter-label{font-size:0.85rem;color:var(--signal-table-subtle)}.filter-select{padding:6px 8px;border:1px solid var(--signal-table-border);border-radius:8px;background:#fff}.table-wrapper{overflow:auto}.table{width:100%;border-collapse:collapse;text-align:left;color:var(--signal-table-text);font-size:0.9375rem}.head th{background:var(--signal-table-muted);color:var(--signal-table-subtle);font-weight:600;letter-spacing:0.04em;text-transform:uppercase;padding:12px 16px;border-bottom:1px solid var(--signal-table-border);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.header-content{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;gap:6px}.sortable{cursor:pointer}.sort-indicator{font-size:0.75rem;color:var(--signal-table-subtle)}.body .row{border-top:1px solid var(--signal-table-border);-webkit-transition:background-color 120ms ease;transition:background-color 120ms ease}.body .row:hover{background:var(--signal-table-muted);cursor:pointer}.cell{padding:12px 16px;vertical-align:middle;color:var(--signal-table-text)}.align-center{text-align:center}.align-right{text-align:right}.selection-col{width:44px;text-align:center}.actions-col{width:60px;text-align:right}.checkbox{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;gap:6px;font-size:0.9rem;color:var(--signal-table-text)}.empty{text-align:center;color:var(--signal-table-subtle);padding:18px 16px}.pagination{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;padding:12px 16px;border-top:1px solid var(--signal-table-border);background:var(--signal-table-muted)}.pagination-meta{color:var(--signal-table-subtle);font-size:0.9rem}.pagination-actions{display:-ms-flexbox;display:flex;gap:8px}.button{padding:8px 12px;border:1px solid var(--signal-table-border);border-radius:8px;background:#fff;cursor:pointer}.button:disabled{opacity:0.5;cursor:not-allowed}.row.selected{background:rgba(37, 99, 235, 0.06)}[data-loading="true"]{opacity:0.7;pointer-events:none}';export{s as signal_feature_table}