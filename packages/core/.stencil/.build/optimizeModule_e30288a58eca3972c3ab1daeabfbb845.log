import{r as t,c as e,h as a}from"./p-CntKH4Tg.js";const s=class{constructor(a){t(this,a),this.rowClick=e(this,"rowClick"),this.selectionChanged=e(this,"selectionChanged"),this.sortChange=e(this,"sortChange"),this.filterChange=e(this,"filterChange"),this.searchChange=e(this,"searchChange"),this.pageChange=e(this,"pageChange"),this.columns=[],this.rows=[],this.searchable=!1,this.filterable=!1,this.selectable=!1,this.selectedKeys=[],this.emptyText="No results",this.filters=[],this.loading=!1,this.searchQuery="",this.internalFilters={},this.internalSelection={},this.handleSearch=t=>{const e=t.target.value;this.searchQuery=e,this.searchChange.emit({query:e})},this.handleFilterChange=(t,e)=>{this.internalFilters={...this.internalFilters,[t]:e},this.filterChange.emit({filters:this.internalFilters})}}componentWillLoad(){this.internalFilters=this.filters.reduce(((t,e)=>(e.value&&(t[e.key]=e.value),t)),{}),this.internalSelection=this.selectedKeys.reduce(((t,e)=>(t[e]=!0,t)),{})}getRowId(t,e){return"function"==typeof this.rowKey?this.rowKey(t):String("string"==typeof this.rowKey&&null!=t[this.rowKey]?t[this.rowKey]:e)}handleSort(t){if(!t.sortable)return;const e=this.internalSort&&this.internalSort.key===t.key?"asc"===this.internalSort.direction?{key:t.key,direction:"desc"}:void 0:{key:t.key,direction:"asc"};this.internalSort=e,this.sortChange.emit({sort:e})}toggleRowSelection(t){const e={...this.internalSelection};e[t]=!e[t],this.internalSelection=e;const a=Object.keys(e).filter((t=>e[t]));this.selectionChanged.emit({keys:a})}toggleAllSelection(t){const e=t.every(((t,e)=>this.internalSelection[this.getRowId(t,e)])),a={};e||t.forEach(((t,e)=>{a[this.getRowId(t,e)]=!0})),this.internalSelection=a;const s=Object.keys(a).filter((t=>a[t]));this.selectionChanged.emit({keys:s})}changePage(t){if(!this.pagination)return;const e=Math.max(0,this.pagination.pageIndex+t);this.pageChange.emit({pageIndex:e,pageSize:this.pagination.pageSize})}get filteredRows(){let t=[...this.rows];if(this.searchable&&this.searchQuery){const e=this.searchQuery.toLowerCase();t=t.filter((t=>this.columns.some((a=>String(t[a.key]??"").toLowerCase().includes(e)))))}if(this.filterable&&(t=t.filter((t=>Object.entries(this.internalFilters).every((([e,a])=>!a||String(t[e]??"")===a))))),this.internalSort){const{key:e,direction:a}=this.internalSort;t=[...t].sort(((t,s)=>{const i=t[e],l=s[e];return null==i&&null==l?0:null==i?1:null==l?-1:i===l?0:"asc"===a?i>l?1:-1:i<l?1:-1}))}return t}get pagedRows(){if(!this.pagination)return this.filteredRows;const t=this.pagination.pageIndex*this.pagination.pageSize;return this.filteredRows.slice(t,t+this.pagination.pageSize)}renderToolbar(t){return this.searchable||this.filterable||this.selectable?a("div",{part:"toolbar",class:"toolbar"},this.selectable&&a("label",{class:"checkbox"},a("input",{type:"checkbox",checked:t.length>0&&t.every(((t,e)=>this.internalSelection[this.getRowId(t,e)])),onChange:()=>this.toggleAllSelection(t)}),a("span",null,"Select all")),this.searchable&&a("input",{part:"search",class:"search",type:"search",placeholder:"Search…",value:this.searchQuery,onInput:this.handleSearch}),this.filterable&&a("div",{class:"filters"},this.filters.map((t=>a("label",{class:"filter",key:t.key},a("span",{class:"filter-label"},t.label),a("select",{class:"filter-select",onInput:e=>this.handleFilterChange(t.key,e.target.value)},a("option",{value:""},"Any"),t.options.map((e=>a("option",{key:e.value,value:e.value,selected:(this.internalFilters[t.key]??"")===e.value},e.label))))))))):null}renderPagination(t){if(!this.pagination)return null;const{pageIndex:e,pageSize:s}=this.pagination,i=e*s+1,l=Math.min(t,i+s-1),r=t;return a("div",{part:"pagination",class:"pagination"},a("div",{class:"pagination-meta"},i,"-",l," of ",r),a("div",{class:"pagination-actions"},a("button",{part:"page-prev",class:"button",onClick:()=>this.changePage(-1),disabled:0===e},"Prev"),a("button",{part:"page-next",class:"button",onClick:()=>this.changePage(1),disabled:l>=r},"Next")))}render(){const t=this.pagedRows,e=this.filteredRows.length;return a("div",{key:"6ed357c24eee8377c13d15756192f60e55fd9de0",part:"root",class:"root","data-loading":this.loading?"true":"false"},this.caption&&a("div",{key:"595667a40ec4dddfc93913becbd25ae6599ac16b",part:"caption",class:"caption"},this.caption),this.renderToolbar(t),a("div",{key:"850cf33971e2f882a80c6d6426c729555c56c527",class:"table-wrapper"},a("table",{key:"5fe73993bf98897efa504c12c79ed1a8bcba44cb",part:"table",class:"table"},a("thead",{key:"48f4b93ab14cf0ba632c421319c7bd1f4bac21f2",part:"head",class:"head"},a("tr",{key:"02cafd059a8a5443ad2b9dd0fac9a87c725b10e1"},this.selectable&&a("th",{key:"4f1fa817f0d640433bcc0df6b5e61c2c11434a38",class:"selection-col"}),this.columns.map((t=>{const e=this.internalSort?.key===t.key,s=this.internalSort?.direction;return a("th",{part:"header",key:t.key,style:t.width?{width:t.width}:void 0,class:{header:!0,sortable:!!t.sortable,[`align-${t.align??"left"}`]:!0,sorted:e},onClick:()=>this.handleSort(t)},a("div",{class:"header-content"},a("slot",{name:`header-${t.key}`},t.header),t.sortable&&a("span",{class:"sort-indicator","aria-hidden":"true"},e?"asc"===s?"▲":"▼":"↕")))})),a("th",{key:"39461de7d5b83697942d8a9cd15b43c0c6f677bf",class:"actions-col"},a("slot",{key:"97e32c27afaf1d209ac5c27c6d50fcda9bab1537",name:"actions-header"})))),a("tbody",{key:"0ccf4a6c8c7327894a23530ed6876b32f176679d",part:"body",class:"body"},this.loading?a("tr",null,a("td",{class:"empty",colSpan:this.columns.length+(this.selectable?1:0)+1},a("slot",{name:"loading"},"Loading…"))):0===t.length?a("tr",null,a("td",{class:"empty",colSpan:this.columns.length+(this.selectable?1:0)+1},a("slot",{name:"empty"},this.emptyText))):t.map(((t,e)=>{const s=this.getRowId(t,e),i=this.internalSelection[s];return a("tr",{part:"row",key:s,class:{row:!0,selected:i},onClick:()=>this.rowClick.emit({row:t})},this.selectable&&a("td",{class:"selection-col cell"},a("label",{class:"checkbox"},a("input",{type:"checkbox",checked:!!i,onClick:t=>t.stopPropagation(),onChange:()=>this.toggleRowSelection(s),"aria-label":"Select row"}))),this.columns.map((e=>a("td",{part:"cell",key:e.key,class:{cell:!0,[`align-${e.align??"left"}`]:!0}},a("slot",{name:`cell-${e.key}`},e.render?e.render(t):t[e.key]??"—")))),a("td",{class:"actions-col cell"},a("slot",{name:"row-actions","row-id":s})))}))))),this.renderPagination(e))}};s.style=':host{--signal-table-border:var(--signal-border, #e5e7eb);--signal-table-surface:var(--signal-surface, #ffffff);--signal-table-muted:var(--signal-muted, #f3f4f6);--signal-table-text:var(--signal-text, #111827);--signal-table-subtle:var(--signal-subtle, #6b7280);--signal-table-radius:12px;--signal-table-shadow:0 8px 20px rgba(17, 24, 39, 0.06);--signal-accent:var(--signal-accent, #2563eb)}.root{border:1px solid var(--signal-table-border);border-radius:var(--signal-table-radius);background:var(--signal-table-surface);-webkit-box-shadow:var(--signal-table-shadow);box-shadow:var(--signal-table-shadow);overflow:hidden}.caption{padding:12px 16px;font-size:0.95rem;font-weight:600;color:var(--signal-table-text)}.toolbar{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:center;align-items:center;gap:12px;padding:12px 16px;border-bottom:1px solid var(--signal-table-border);background:var(--signal-table-muted)}.search{-ms-flex:1 1 220px;flex:1 1 220px;min-width:180px;padding:8px 10px;border:1px solid var(--signal-table-border);border-radius:8px;background:#fff}.filters{display:-ms-flexbox;display:flex;gap:12px;-ms-flex-wrap:wrap;flex-wrap:wrap}.filter{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;gap:6px}.filter-label{font-size:0.85rem;color:var(--signal-table-subtle)}.filter-select{padding:6px 8px;border:1px solid var(--signal-table-border);border-radius:8px;background:#fff}.table-wrapper{overflow:auto}.table{width:100%;border-collapse:collapse;text-align:left;color:var(--signal-table-text);font-size:0.9375rem}.head th{background:var(--signal-table-muted);color:var(--signal-table-subtle);font-weight:600;letter-spacing:0.04em;text-transform:uppercase;padding:12px 16px;border-bottom:1px solid var(--signal-table-border);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.header-content{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;gap:6px}.sortable{cursor:pointer}.sort-indicator{font-size:0.75rem;color:var(--signal-table-subtle)}.body .row{border-top:1px solid var(--signal-table-border);-webkit-transition:background-color 120ms ease;transition:background-color 120ms ease}.body .row:hover{background:var(--signal-table-muted);cursor:pointer}.cell{padding:12px 16px;vertical-align:middle;color:var(--signal-table-text)}.align-center{text-align:center}.align-right{text-align:right}.selection-col{width:44px;text-align:center}.actions-col{width:60px;text-align:right}.checkbox{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;gap:6px;font-size:0.9rem;color:var(--signal-table-text)}.empty{text-align:center;color:var(--signal-table-subtle);padding:18px 16px}.pagination{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;padding:12px 16px;border-top:1px solid var(--signal-table-border);background:var(--signal-table-muted)}.pagination-meta{color:var(--signal-table-subtle);font-size:0.9rem}.pagination-actions{display:-ms-flexbox;display:flex;gap:8px}.button{padding:8px 12px;border:1px solid var(--signal-table-border);border-radius:8px;background:#fff;cursor:pointer}.button:disabled{opacity:0.5;cursor:not-allowed}.row.selected{background:rgba(37, 99, 235, 0.06)}[data-loading="true"]{opacity:0.7;pointer-events:none}';export{s as signal_feature_table}