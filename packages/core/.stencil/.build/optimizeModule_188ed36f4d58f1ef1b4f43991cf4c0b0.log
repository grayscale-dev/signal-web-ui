import{r as registerInstance,c as createEvent,h,a as getElement}from"./index-DS32Solz.js";var uiAccessibilityHelpersCss=function(){return":host{display:block}.container{display:contents}"};var SignalAccessibilityHelpers=function(){function t(t){var e=this;registerInstance(this,t);this.shortcut=createEvent(this,"shortcut");this.focusVisible=true;this.trapFocus=false;this.returnFocus=false;this.lastActive=null;this.keydownHandler=function(t){if(!e.shortcutMap)return;Object.entries(e.shortcutMap).forEach((function(i){var n=i[0],s=i[1];if(e.matchesShortcut(t,n)){t.preventDefault();e.shortcut.emit({combo:s!==null&&s!==void 0?s:n})}}))};this.focusTrapHandler=function(t){if(!e.trapFocus||t.key!=="Tab")return;var i=e.getFocusable();if(i.length===0)return;var n=i[0];var s=i[i.length-1];if(t.shiftKey&&document.activeElement===n){t.preventDefault();s.focus()}else if(!t.shiftKey&&document.activeElement===s){t.preventDefault();n.focus()}}}t.prototype.componentDidLoad=function(){if(this.trapFocus)this.enableTrap();this.syncFocusVisible()};t.prototype.disconnectedCallback=function(){this.disableTrap();document.removeEventListener("keydown",this.keydownHandler)};t.prototype.syncFocusVisible=function(){document.documentElement.dataset.focusVisible=this.focusVisible?"true":"false"};t.prototype.handleTrapChange=function(t){if(t){this.enableTrap()}else{this.disableTrap()}};t.prototype.onKeydown=function(t){this.keydownHandler(t)};t.prototype.enableTrap=function(){this.lastActive=document.activeElement;var t=this.getFocusable()[0];t===null||t===void 0?void 0:t.focus();document.addEventListener("keydown",this.focusTrapHandler)};t.prototype.disableTrap=function(){document.removeEventListener("keydown",this.focusTrapHandler);if(this.returnFocus&&this.lastActive instanceof HTMLElement){this.lastActive.focus()}};t.prototype.getFocusable=function(){var t,e;var i="button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])";return Array.from((e=(t=this.host.shadowRoot)===null||t===void 0?void 0:t.querySelectorAll(i))!==null&&e!==void 0?e:[])};t.prototype.matchesShortcut=function(t,e){var i=e.toLowerCase().replace(/\s+/g,"");var n=i.split("+");var s=t.key.toLowerCase();var r={meta:n.includes("meta")||n.includes("cmd")||n.includes("command"),ctrl:n.includes("ctrl")||n.includes("control"),alt:n.includes("alt")||n.includes("option"),shift:n.includes("shift")};var a=n.find((function(t){return!["meta","cmd","command","ctrl","control","alt","option","shift"].includes(t)}));if(a&&a!==s)return false;if(r.meta!==t.metaKey)return false;if(r.ctrl!==t.ctrlKey)return false;if(r.alt!==t.altKey)return false;if(r.shift!==t.shiftKey)return false;return true};t.prototype.render=function(){return h("div",{key:"5401da3ff4173457b586b5503bb4baadaafad8d9",class:"container"},h("slot",{key:"cedd2c01943e306fc8aa312c0cd315a9e9936eaa"}))};Object.defineProperty(t.prototype,"host",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{focusVisible:[{syncFocusVisible:0}],trapFocus:[{handleTrapChange:0}]}},enumerable:false,configurable:true});return t}();SignalAccessibilityHelpers.style=uiAccessibilityHelpersCss();export{SignalAccessibilityHelpers as signal_accessibility_helpers};