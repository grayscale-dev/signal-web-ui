import{p as e,H as t,c as s,h as i,t as o}from"./index.js";const n=e(class extends t{constructor(e){super(),!1!==e&&this.__registerHost(),this.__attachShadow(),this.openChange=s(this,"openChange"),this.select=s(this,"itemSelect"),this.open=!1,this.items=[],this.label="Menu",this.align="left",this.closeOnSelect=!0,this.focusedIndex=-1,this.onOutsideClick=e=>{this.open&&(this.host.contains(e.target)||this.close())},this.toggle=()=>{this.open=!this.open}}handleOpen(e){this.openChange.emit({open:e}),e?this.setInitialFocus():this.focusedIndex=-1}componentDidLoad(){this.open&&this.setInitialFocus()}setInitialFocus(){const e=this.items.findIndex((e=>!e.disabled));this.focusedIndex=e}onKeydown(e){if(this.open&&("Escape"===e.key&&(this.close(),e.stopPropagation()),"ArrowDown"===e.key&&(e.preventDefault(),this.focusedIndex=Math.min(this.items.length-1,this.focusedIndex+1)),"ArrowUp"===e.key&&(e.preventDefault(),this.focusedIndex=Math.max(0,this.focusedIndex-1)),"Enter"===e.key&&this.focusedIndex>=0)){const e=this.items[this.focusedIndex];e&&!e.disabled&&this.emitSelect(e.key)}}componentDidRender(){if(!this.open)return;const e=this.host.shadowRoot?.querySelector(".menu");e&&e.focus()}connectedCallback(){document.addEventListener("mousedown",this.onOutsideClick)}disconnectedCallback(){document.removeEventListener("mousedown",this.onOutsideClick)}close(){this.open=!1}emitSelect(e){this.select.emit({key:e}),this.closeOnSelect&&this.close()}renderTrigger(){return i("button",{type:"button",class:"trigger","aria-haspopup":"menu","aria-expanded":""+this.open,onClick:this.toggle},i("slot",{name:"trigger"},this.label),i("span",{class:"caret","aria-hidden":!0},"â–¾"))}renderItems(){return i("div",{class:"menu",role:"menu",tabIndex:-1,"aria-label":this.label},this.items.map(((e,t)=>i("button",{key:e.key,type:"button",role:"menuitem",class:{item:!0,focused:this.focusedIndex===t,disabled:!!e.disabled,danger:!!e.danger},disabled:e.disabled,onClick:()=>!e.disabled&&this.emitSelect(e.key)},i("span",{class:"label"},e.label),e.shortcut&&i("span",{class:"shortcut"},e.shortcut)))))}render(){return i("div",{key:"e60d3ae869879ec00096a12d8a43ec92847f11b0",class:{wrapper:!0,open:this.open,[this.align]:!0}},this.renderTrigger(),this.open&&this.renderItems())}get host(){return this}static get watchers(){return{open:[{handleOpen:0}]}}static get style(){return":host{display:inline-block;position:relative}.wrapper{position:relative}.trigger{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;gap:6px;padding:8px 12px;border-radius:var(--signal-radius-sm, 6px);border:1px solid var(--signal-color-border, #d0d7de);background:var(--signal-color-surface, #fff);color:var(--signal-color-text, #111);font:inherit;cursor:pointer;-webkit-box-shadow:var(--signal-shadow-soft, 0 1px 2px rgba(0,0,0,0.08));box-shadow:var(--signal-shadow-soft, 0 1px 2px rgba(0,0,0,0.08))}.trigger:focus-visible{outline:2px solid var(--signal-color-accent, #236cff);outline-offset:2px}.caret{color:var(--signal-color-subtle, #5f6a7d)}.menu{position:absolute;min-width:220px;margin-top:8px;border-radius:var(--signal-radius-sm, 6px);border:1px solid var(--signal-color-border, #d0d7de);background:var(--signal-color-surface, #fff);-webkit-box-shadow:var(--signal-shadow-strong, 0 12px 28px rgba(0,0,0,0.2));box-shadow:var(--signal-shadow-strong, 0 12px 28px rgba(0,0,0,0.2));padding:4px;z-index:10;outline:none}.wrapper.right .menu{right:0}.wrapper.left .menu{left:0}.item{width:100%;text-align:left;border:0;background:transparent;border-radius:4px;padding:8px 10px;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;color:var(--signal-color-text, #111);cursor:pointer}.item:hover,.item.focused{background:var(--signal-color-muted, #f2f4f7)}.item.disabled{opacity:0.55;cursor:not-allowed}.item.danger{color:var(--signal-color-danger, #d1242f)}.shortcut{color:var(--signal-color-subtle, #5f6a7d);font-size:12px}"}},[257,"signal-dropdown",{open:[1540],items:[16],label:[1],align:[513],closeOnSelect:[516,"close-on-select"],focusedIndex:[32]},[[8,"keydown","onKeydown"]],{open:[{handleOpen:0}]}]),r=n,a=function(){"undefined"!=typeof customElements&&["signal-dropdown"].forEach((e=>{"signal-dropdown"===e&&(customElements.get(o(e))||customElements.define(o(e),n))}))};export{r as SignalDropdown,a as defineCustomElement}