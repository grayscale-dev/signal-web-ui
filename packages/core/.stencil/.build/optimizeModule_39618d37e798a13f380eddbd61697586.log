import{r as t,c as s,h as e,a as i}from"./p-DS32Solz.js";const n=class{constructor(e){t(this,e),this.shortcut=s(this,"shortcut"),this.focusVisible=!0,this.trapFocus=!1,this.returnFocus=!1,this.lastActive=null,this.keydownHandler=t=>{this.shortcutMap&&Object.entries(this.shortcutMap).forEach((([s,e])=>{this.matchesShortcut(t,s)&&(t.preventDefault(),this.shortcut.emit({combo:e??s}))}))},this.focusTrapHandler=t=>{if(!this.trapFocus||"Tab"!==t.key)return;const s=this.getFocusable();if(0===s.length)return;const e=s[0],i=s[s.length-1];t.shiftKey&&document.activeElement===e?(t.preventDefault(),i.focus()):t.shiftKey||document.activeElement!==i||(t.preventDefault(),e.focus())}}componentDidLoad(){this.trapFocus&&this.enableTrap(),this.syncFocusVisible()}disconnectedCallback(){this.disableTrap(),document.removeEventListener("keydown",this.keydownHandler)}syncFocusVisible(){document.documentElement.dataset.focusVisible=this.focusVisible?"true":"false"}handleTrapChange(t){t?this.enableTrap():this.disableTrap()}onKeydown(t){this.keydownHandler(t)}enableTrap(){this.lastActive=document.activeElement;const t=this.getFocusable()[0];t?.focus(),document.addEventListener("keydown",this.focusTrapHandler)}disableTrap(){document.removeEventListener("keydown",this.focusTrapHandler),this.returnFocus&&this.lastActive instanceof HTMLElement&&this.lastActive.focus()}getFocusable(){return Array.from(this.host.shadowRoot?.querySelectorAll("button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])")??[])}matchesShortcut(t,s){const e=s.toLowerCase().replace(/\s+/g,"").split("+"),i=t.key.toLowerCase(),n=e.includes("meta")||e.includes("cmd")||e.includes("command"),a=e.includes("ctrl")||e.includes("control"),c=e.includes("alt")||e.includes("option"),o=e.includes("shift"),h=e.find((t=>!["meta","cmd","command","ctrl","control","alt","option","shift"].includes(t)));return(!h||h===i)&&n===t.metaKey&&a===t.ctrlKey&&c===t.altKey&&o===t.shiftKey}render(){return e("div",{key:"5401da3ff4173457b586b5503bb4baadaafad8d9",class:"container"},e("slot",{key:"cedd2c01943e306fc8aa312c0cd315a9e9936eaa"}))}get host(){return i(this)}static get watchers(){return{focusVisible:[{syncFocusVisible:0}],trapFocus:[{handleTrapChange:0}]}}};n.style=":host{display:block}.container{display:contents}";export{n as signal_accessibility_helpers}