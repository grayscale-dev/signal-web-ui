var __assign=this&&this.__assign||function(){__assign=Object.assign||function(i){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s))i[s]=t[s]}return i};return __assign.apply(this,arguments)};import{r as registerInstance,c as createEvent,h,a as getElement}from"./index-CntKH4Tg.js";var uiModalCss=function(){return':host{font-family:var(--signal-font-sans)}.overlay{position:fixed;inset:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;padding:var(--signal-space-4);z-index:1000}.backdrop{position:absolute;inset:0;background:var(--signal-color-overlay);-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px)}.dialog{position:relative;z-index:1;background:var(--signal-color-surface);border:1px solid var(--signal-color-border);border-radius:var(--signal-radius-md);-webkit-box-shadow:var(--signal-shadow-strong);box-shadow:var(--signal-shadow-strong);display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;max-width:calc(100vw - 4rem);max-height:calc(100vh - 4rem);min-width:320px;overflow:hidden}:host([size="sm"]) .dialog{width:min(100%, 520px)}:host([size="md"]) .dialog{width:min(100%, 720px)}:host([size="lg"]) .dialog{width:min(100%, 960px)}.dialog.fullscreen{width:calc(100vw - 2rem);height:calc(100vh - 2rem);max-width:none;max-height:none;border-radius:var(--signal-radius-sm)}.header{border-bottom:1px solid var(--signal-color-border);padding:var(--signal-space-4) var(--signal-space-5);background:var(--signal-color-surface)}.header-content{display:-ms-flexbox;display:flex;-ms-flex-align:start;align-items:flex-start;-ms-flex-pack:justify;justify-content:space-between;gap:var(--signal-space-4)}.title{font-size:15px;margin:0;color:var(--signal-color-text)}.description{font-size:13px;margin:4px 0 0;color:var(--signal-color-subtle)}.header-actions{display:-ms-inline-flexbox;display:inline-flex;gap:var(--signal-space-2);-ms-flex-align:center;align-items:center}.header-button{border:1px solid var(--signal-color-border);background:var(--signal-color-surface);color:var(--signal-color-subtle);border-radius:var(--signal-radius-sm);padding:4px 8px;font-size:12px;cursor:pointer}.close-button{width:32px;height:32px;border-radius:var(--signal-radius-sm);border:none;background:transparent;color:var(--signal-color-subtle);font-size:20px;cursor:pointer}.close-button:hover,.header-button:hover{background:var(--signal-color-muted)}.close-button:focus-visible,.header-button:focus-visible{outline:none;-webkit-box-shadow:var(--signal-shadow-focus);box-shadow:var(--signal-shadow-focus)}.body{padding:var(--signal-space-5);color:var(--signal-color-text);overflow:auto;-ms-flex:1;flex:1}.footer{border-top:1px solid var(--signal-color-border);padding:var(--signal-space-4) var(--signal-space-5);background:var(--signal-color-surface)}.resize-handle{position:absolute;right:6px;bottom:6px;width:14px;height:14px;cursor:se-resize;background:transparent}:host([drag-enabled]) .header{cursor:move}'};var SignalModal=function(){function i(i){var t=this;registerInstance(this,i);this.openChange=createEvent(this,"openChange");this.close=createEvent(this,"close");this.confirm=createEvent(this,"confirm");this.open=false;this.size="md";this.closeOnBackdrop=true;this.closeOnEsc=true;this.dragEnabled=false;this.resizable=false;this.fullscreen=false;this.showHeaderControls=true;this.showConfirm=false;this.confirmText="Confirm";this.position={x:0,y:0};this.sizeState={width:680,height:480};this.lastActiveElement=null;this.previousOverflow="";this.dragging=false;this.resizing=false;this.dragStart={x:0,y:0,signalX:0,signalY:0};this.resizeStart={x:0,y:0,width:0,height:0};this.handleTrapFocus=function(i){if(i.key!=="Tab")return;var e=t.getFocusableElements();if(e.length===0)return;var n=e[0];var s=e[e.length-1];if(i.shiftKey&&document.activeElement===n){i.preventDefault();s.focus()}else if(!i.shiftKey&&document.activeElement===s){i.preventDefault();n.focus()}};this.handleDragStart=function(i){if(!t.dragEnabled||t.fullscreen)return;if(i.target.closest("button"))return;t.dragging=true;t.dragStart={x:i.clientX,y:i.clientY,signalX:t.position.x,signalY:t.position.y};window.addEventListener("pointermove",t.handleDragMove);window.addEventListener("pointerup",t.handleDragEnd)};this.handleDragMove=function(i){if(!t.dragging)return;t.position={x:t.dragStart.signalX+(i.clientX-t.dragStart.x),y:t.dragStart.signalY+(i.clientY-t.dragStart.y)}};this.handleDragEnd=function(){t.dragging=false;window.removeEventListener("pointermove",t.handleDragMove);window.removeEventListener("pointerup",t.handleDragEnd)};this.handleResizeStart=function(i){if(!t.resizable||t.fullscreen)return;i.stopPropagation();t.resizing=true;t.resizeStart={x:i.clientX,y:i.clientY,width:t.sizeState.width,height:t.sizeState.height};window.addEventListener("pointermove",t.handleResizeMove);window.addEventListener("pointerup",t.handleResizeEnd)};this.handleResizeMove=function(i){var e,n,s,r,a,o,l,h;if(!t.resizing)return;var d=t.resizeStart.width+(i.clientX-t.resizeStart.x);var u=t.resizeStart.height+(i.clientY-t.resizeStart.y);var c=(n=(e=t.minSize)===null||e===void 0?void 0:e.width)!==null&&n!==void 0?n:360;var f=(r=(s=t.minSize)===null||s===void 0?void 0:s.height)!==null&&r!==void 0?r:240;var v=(o=(a=t.maxSize)===null||a===void 0?void 0:a.width)!==null&&o!==void 0?o:1200;var g=(h=(l=t.maxSize)===null||l===void 0?void 0:l.height)!==null&&h!==void 0?h:900;t.sizeState={width:Math.max(c,Math.min(v,d)),height:Math.max(f,Math.min(g,u))}};this.handleResizeEnd=function(){t.resizing=false;window.removeEventListener("pointermove",t.handleResizeMove);window.removeEventListener("pointerup",t.handleResizeEnd)};this.handleHeaderKeyDown=function(i){if(!t.dragEnabled)return;if(i.key==="Enter"||i.key===" "){i.preventDefault()}}}i.prototype.onOpenChange=function(i){var t=this;var e;this.openChange.emit({open:i});if(i){this.lastActiveElement=document.activeElement;this.previousOverflow=document.body.style.overflow;document.body.style.overflow="hidden";this.resetPosition();requestAnimationFrame((function(){return t.focusFirstElement()}))}else{document.body.style.overflow=this.previousOverflow;(e=this.lastActiveElement)===null||e===void 0?void 0:e.focus()}};i.prototype.componentWillLoad=function(){if(this.defaultSize){this.sizeState=__assign({},this.defaultSize)}if(this.defaultPosition){this.position=__assign({},this.defaultPosition)}};i.prototype.componentDidLoad=function(){if(this.open){this.onOpenChange(true)}};i.prototype.handleGlobalKeydown=function(i){if(!this.open)return;if(i.key==="Escape"&&this.closeOnEsc){i.preventDefault();this.requestClose()}if(i.key==="Tab"){this.handleTrapFocus(i)}};i.prototype.focusFirstElement=function(){var i;var t=this.getFocusableElements();if(t.length>0){t[0].focus()}else{(i=this.dialogEl)===null||i===void 0?void 0:i.focus()}};i.prototype.getFocusableElements=function(){if(!this.dialogEl)return[];var i="button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])";return Array.from(this.dialogEl.querySelectorAll(i)).filter((function(i){return!i.hasAttribute("disabled")}))};i.prototype.requestClose=function(){this.close.emit();this.open=false};i.prototype.resetPosition=function(){if(this.defaultPosition){this.position=__assign({},this.defaultPosition);return}this.position={x:0,y:0}};i.prototype.render=function(){var i=this;if(!this.open)return null;var t=this.fullscreen?{}:{transform:"translate(".concat(this.position.x,"px, ").concat(this.position.y,"px)")};if(!this.fullscreen&&(this.resizable||this.defaultSize)){t.width="".concat(this.sizeState.width,"px");t.height="".concat(this.sizeState.height,"px")}var e=this.dragEnabled?"button":undefined;var n=this.dragEnabled?0:undefined;var s=this.dragEnabled?this.handleDragStart:undefined;var r=this.dragEnabled?this.handleHeaderKeyDown:undefined;return h("div",{part:"overlay",class:"overlay"},h("div",{part:"backdrop",class:"backdrop",onClick:this.closeOnBackdrop?function(){return i.requestClose()}:undefined,"aria-hidden":"true"}),h("div",{part:"dialog",class:{dialog:true,fullscreen:this.fullscreen},role:"dialog","aria-modal":"true","aria-label":this.heading,style:t,ref:function(t){return i.dialogEl=t},tabindex:-1},h("div",{part:"header",class:"header",role:e,tabIndex:n,onPointerDown:s,onKeyDown:r},h("slot",{name:"header"},h("div",{class:"header-content"},h("div",null,this.heading&&h("h2",{class:"title"},this.heading),this.description&&h("p",{class:"description"},this.description)),this.showHeaderControls&&h("div",{class:"header-actions"},this.showConfirm&&h("button",{class:"header-button",type:"button",onClick:function(){return i.confirm.emit()}},this.confirmText),h("button",{class:"close-button",type:"button","aria-label":"Close dialog",onClick:function(){return i.requestClose()}},"Ã—"))))),h("div",{part:"body",class:"body"},h("slot",null)),h("div",{part:"footer",class:"footer"},h("slot",{name:"footer"})),this.resizable&&!this.fullscreen&&h("div",{part:"resize-handle",class:"resize-handle",onPointerDown:this.handleResizeStart})))};Object.defineProperty(i.prototype,"host",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(i,"watchers",{get:function(){return{open:[{onOpenChange:0}]}},enumerable:false,configurable:true});return i}();SignalModal.style=uiModalCss();export{SignalModal as signal_modal};